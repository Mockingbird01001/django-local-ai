import{F as V,s as v,a as k}from"./FormCard-03e23457.js";import{d as w,r as n,j as y,k as g,w as C,f as l,a as e,b as c,u as _,c as t,g as i,n as $}from"./index-90d3d32d.js";const L=e("div",{class:"hidden text-3xl text-center lg:block"},"Create an account",-1),H={class:"lg:pt-8"},M={class:"p-float-label"},T=e("label",{for:"name"},"Full name",-1),F=["innerHTML"],U={class:"p-float-label"},B=e("label",{for:"email"},"Email",-1),E=["innerHTML"],N={class:"p-float-label"},O=e("label",{for:"password1"},"Password",-1),P=["innerHTML"],j={class:"p-float-label"},A=e("label",{for:"password2"},"Confirm password",-1),I=["innerHTML"],R={class:"flex flex-col pt-2 text-center"},S=w({__name:"RegistrationForm",emits:["formOk"],setup(h,{emit:d}){const u=n(""),m=n(""),r=n(""),p=n(""),a=y({errors:{}});async function b(){const f={name:u.value,email:m.value,password1:r.value,password2:p.value},{error:s,res:o,errors:x}=await $.post("/api/account/register",f);if(!s)d("formOk");else if(s.type=="validation")a.errors=x;else throw new Error(`Unmanaged error: status code ${o.status}`)}return(f,s)=>(l(),g(V,{class:"mx-3"},{default:C(()=>[L,e("div",H,[e("span",M,[c(_(v),{id:"name",type:"text",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=o=>u.value=o)},null,8,["modelValue"]),T]),"name"in a.errors?(l(),t("small",{key:0,id:"name-help",class:"p-error",innerHTML:a.errors.name},null,8,F)):i("",!0)]),e("div",null,[e("span",U,[c(_(v),{id:"email",type:"text",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=o=>m.value=o)},null,8,["modelValue"]),B]),"email"in a.errors?(l(),t("small",{key:0,id:"email-help",class:"p-error",innerHTML:a.errors.email},null,8,E)):i("",!0)]),e("div",null,[e("span",N,[c(_(k),{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=o=>r.value=o)},null,8,["modelValue"]),O]),"password1"in a.errors?(l(),t("small",{key:0,id:"password1-help",class:"p-error",innerHTML:a.errors.password1},null,8,P)):i("",!0)]),e("div",null,[e("span",j,[c(_(k),{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=o=>p.value=o),feedback:!1},null,8,["modelValue"]),A]),"password2"in a.errors?(l(),t("small",{key:0,id:"password2-help",class:"p-error",innerHTML:a.errors.password2},null,8,I)):i("",!0)]),e("div",R,[e("button",{class:"w-full xs:w-96 btn success",onClick:s[4]||(s[4]=o=>b())},"Save"),e("button",{class:"mt-5 btn txt-light",onClick:s[5]||(s[5]=o=>f.$router.back())},"Cancel")])]),_:1}))}}),q={key:0,class:"mt-3 sm:mt:12"},z={key:0,class:"mt-5 lg:mt-12"},D={key:1,class:"text-center"},K=w({__name:"CreateAccountView",setup(h){const d=n(0),u=n(!1);return(m,r)=>u.value?i("",!0):(l(),t("div",q,[d.value==0?(l(),t("div",z,[c(S,{class:"app-form",onFormOk:r[0]||(r[0]=p=>++d.value)})])):d.value==1?(l(),t("div",D," Please check your email and click on the activation link to continue the registration process ")):i("",!0)]))}});export{K as default};
